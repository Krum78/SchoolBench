
<div *ngIf="question">
  <h3><strong>Question #{{question.itemOrder}} - {{typeString}}</strong></h3>

  <div>
    <ul class="nav nav-tabs" role="tablist">
      <li role="presentation" class="active"><a href="#previewQuestionTab{{question.id}}" attr.aria-controls="previewQuestionTab{{question.id}}" role="tab" data-toggle="tab">Preview</a></li>
      <li role="presentation"><a href="#editQuestionTab{{question.id}}" attr.aria-controls="editQuestionTab{{question.id}}" role="tab" data-toggle="tab">Edit Question</a></li>
      <li role="presentation"><a href="#answersTab{{question.id}}" attr.aria-controls="answersTab{{question.id}}" role="tab" data-toggle="tab">Answer Options</a></li>
    </ul>
  </div>

  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="previewQuestionTab{{question.id}}">
      <div [froalaView]="question.question"></div>
      <hr />
      <mat-radio-group *ngIf="question.type == 1" class="answer-radio-group">
        <mat-radio-button *ngFor="let answer of question.answerOptions" class="answer-radio-button" [value]="answer">
          {{answer.text}}
        </mat-radio-button>
      </mat-radio-group>
      <div *ngIf="question.type == 2">
        <mat-checkbox *ngFor="let answer of question.answerOptions" [labelPosition]="after">
          {{answer.text}}
        </mat-checkbox>
      </div>
    </div>

    <div role="tabpanel" class="tab-pane" id="editQuestionTab{{question.id}}">
      <div class="form-inline">
        <div class="form-group" id="editQuestionTypeBlock">
          <div class="input-group">
            <div class="input-group-addon">Question Type</div>
            <select matInput [(ngModel)]="question.type" placeholder="Select question type" class="form-control">
              <option value="1">Single Choice</option>
              <option value="2">Multiple Choices</option>
            </select>
          </div>
        </div>
      </div>
      <hr />
      <div [froalaEditor] [(froalaModel)]="question.question"></div>
    </div>

    <div role="tabpanel" class="tab-pane" id="answersTab{{question.id}}">
      <div *ngIf="question.answerOptions && auth.isUserCreator" class="answer-list-button-panel">
        <button class="btn btn-sm btn-success pull-right" (click)="openAnswerDialog()"><span class="glyphicon glyphicon-plus"></span> Create Answer</button>
      </div>

      <div class="clearfix"></div>

      <mat-radio-group *ngIf="question.type == 1" class="answer-radio-group">
        <div *ngFor="let answer of question.answerOptions" class="answer-list-item">
          <div *ngIf="auth.isUserCreator" class="pull-right list-item-button-box">
            <button type="button" class="btn btn-xs btn-primary" (click)="openAnswerDialog(answer)"><span class="glyphicon glyphicon-pencil"></span></button>
            <button type="button" class="btn btn-xs btn-danger" (click)="deleteAnswer(answer)"><span class="glyphicon glyphicon-trash"></span></button>
          </div>
          <div class="clearfix"></div>
          <div>
            <mat-radio-button class="answer-radio-button" [value]="answer">
              {{answer.text}}
            </mat-radio-button>
          </div>
        </div>
      </mat-radio-group>

      <div *ngIf="question.type == 2">
        <div *ngFor="let answer of question.answerOptions" class="answer-list-item">
          <div>
            <div *ngIf="auth.isUserCreator" class="pull-right list-item-button-box">
              <button type="button" class="btn btn-xs btn-primary" (click)="openAnswerDialog(answer)"><span class="glyphicon glyphicon-pencil"></span></button>
              <button type="button" class="btn btn-xs btn-danger" (click)="deleteAnswer(answer)"><span class="glyphicon glyphicon-trash"></span></button>
            </div>
            <div class="clearfix"></div>
            <div>
              <mat-checkbox [labelPosition]="after">
                {{answer.text}}
              </mat-checkbox>
            </div>
          </div>
        </div>
      </div>
      </div>
  </div>
</div>
